<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Gate View | CampusCar</title>

<style>
body{
  margin:0;
  font-family:Inter,system-ui;
  background:#020617;
  color:#e5e7eb;
}
header{
  padding:16px 30px;
  background:#020617;
  border-bottom:1px solid #1e293b;
}
h1{margin:0;font-size:20px}
.container{
  padding:24px;
  display:grid;
  grid-template-columns:2fr 1fr;
  gap:20px;
}
.card{
  background:#0f172a;
  border:1px solid #1e293b;
  border-radius:12px;
  padding:20px;
}
#plate{
  font-size:34px;
  margin:12px 0;
}
.allow{color:#22c55e}
.block{color:#ef4444}
</style>
</head>

<body>

<header>
  <h1>ðŸš§ Live Gate Monitoring â€“ NIT Manipur</h1>
</header>

<div class="container">

  <!-- CAMERA -->
  <div class="card">
    <h3>Live Camera Feed</h3>
    <img src="/video_feed" width="100%" style="border-radius:10px">
  </div>

  <!-- STATUS -->
  <div class="card">
    <h3>Vehicle Status</h3>
    <div id="plate">WAITING</div>
    <div id="gate" class="allow">---</div>
    <div id="reason" style="color:#94a3b8"></div>
  </div>

</div>

<script>
async function refresh(){
  const d = await fetch("/latest").then(r=>r.json());
  const g = await fetch("/gate").then(r=>r.json());

  if(d.plate){
    plate.innerText = d.plate;
  }

  gate.innerText = g.status || "---";
  gate.className = g.status==="BLOCK"?"block":"allow";
  reason.innerText = g.reason || "";
}

setInterval(refresh,1000);
</script>

</body>
</html>
</div>

  <!-- LIVE CAMERA FEED -->
  <div class="panel">
    <h2>Live Camera Feed</h2>
    <img src="/video_feed" width="100%" style="border-radius:12px">
  </div>    


</div>


<footer>
  Â© 2026 National Institute of Technology Manipur â€¢ CampusCar
</footer>




